<!DOCTYPE html><html lang="cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GODWiT的老狗窝 - 老狗</title><meta name="keywords" content="Godwit,Programmer,Java,Go,C++,Erlang"><meta name="author" content="Godwit,GodwitNow@foxmail.com"><meta name="copyright" content="Godwit"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="未来不迎，当时不杂，即过不恋">
<meta property="og:type" content="website">
<meta property="og:title" content="GODWiT的老狗窝">
<meta property="og:url" content="http://godwit.cn/index.html">
<meta property="og:site_name" content="GODWiT的老狗窝">
<meta property="og:description" content="未来不迎，当时不杂，即过不恋">
<meta property="og:locale">
<meta property="og:image" content="http://godwit.cn/null">
<meta property="article:author" content="Godwit">
<meta property="article:tag" content="Godwit,Programmer,Java,Go,C++,Erlang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://godwit.cn/null"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://godwit.cn/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-02-15 21:38:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.0.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div></div><hr/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">GODWiT的老狗窝</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">GODWiT的老狗窝</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/15/C-%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title="C#仿SnowFlake算法">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C#仿SnowFlake算法"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/15/C-%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title="C#仿SnowFlake算法">C#仿SnowFlake算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-15T13:28:23.000Z" title="Created 2021-02-15 21:28:23">2021-02-15</time></span></div><div class="content">我们的项目需要在本地生成一个唯一的ID，于是考虑到用SnowFlake算法来实现，经过调研，Github上找到了一个开源库，用起来十分方便。使用方法分享如下：
Github地址RobThree/IdGen
使用说明1. 引入在NuGet中查找IdGen.Configuration，并导入项目
2. 修改配置文件(App.config)添加如下配置（注意：configSections要放在最前面）：
1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;configuration&gt;  &lt;configSections&gt;    &lt;section name=&quot;idGenSection&quot; type=&quot;IdGen.Configuration.IdGeneratorsSection, IdGen.Configuration&quot; /&gt;  &lt;/configSections&gt;  &lt;idGen ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/15/Net%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title=".Net仿SnowFlake算法">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt=".Net仿SnowFlake算法"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/15/Net%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title=".Net仿SnowFlake算法">.Net仿SnowFlake算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-15T13:11:12.000Z" title="Created 2021-02-15 21:11:12">2021-02-15</time></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/08/18/MongoDB%E4%B8%A4%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/" title="MongoDB两表联合查询">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB两表联合查询"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/08/18/MongoDB%E4%B8%A4%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/" title="MongoDB两表联合查询">MongoDB两表联合查询</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-08-18T13:32:42.000Z" title="Created 2020-08-18 21:32:42">2020-08-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">MongoDB里面有两个Collection，一个是cutting_tool_template(刀具模板)，一个是cutting_tool(刀具)，每把刀具隶属于一个模板，因此一个模板拥有多把刀具。现在页面需要展示该刀具模板有多少把刀具。
有很多种实现方法：第一：把刀具集合作为模板的一个列表；
第二：模板增加一个变量（tool_count），增加一把刀具则+1，删除一把刀具则-1;
第三：每次查询模板数据的时候，联合查询刀具表，进行一个mysql里面的count操作。
这里采用了第三种方法。通过cutting_tool.template._id与cutting_tool.template_id进行关联。
MongoDB通过lookup函数来实现两个collection的联合查询。描述如下：
 123456789101112&#x2F;** * from: The target collection. 目标集合，即本案例中的[刀具]表 * localField: The local join field. 本地联合变量：即本案例中的[模板表]的ID * foreignField: The ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/08/18/hugo-step-by-step/" title="hugo-step-by-step">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hugo-step-by-step"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/08/18/hugo-step-by-step/" title="hugo-step-by-step">hugo-step-by-step</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-08-18T13:07:13.000Z" title="Created 2020-08-18 21:07:13">2020-08-18</time></span></div><div class="content">1. 安装Hugo安装环境：Win10
1.1 建立文件夹
建立文件夹D:\Hugo
建立子文件夹：D:\Hugo\bin，D:\Hugo\Sites

1.2 下载二进制安装文件
进入页面：https://github.com/gohugoio/hugo/releases
选择对应版本，目前最新版本：hugo_0.71.0_Windows-64bit.zip
解压后放到D:\Hugo\bin目录下，如下

1234567D:.├─bin│      hugo.exe│      LICENSE│      README.md│└─Sites


将D:\Hugo\bin添加到环境变量

12rem 如果下面步骤有问题，需要手动重启cmd，或者直接手动添加set PATH=%PATH%;D:\Hugo\bin


验证安装


D:\Hugo\Sites&gt;hugo versionHugo Static Site Generator v0.71.0-06150C87 windows/amd64 BuildDate: 2020-05-18T16:08:31Z

2. 创建站点2.1  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/08/18/hello-world/" title="Hello World">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/08/18/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-08-18T11:35:30.361Z" title="Created 2020-08-18 19:35:30">2020-08-18</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/null" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Godwit</div><div class="author-info__description">未来不迎，当时不杂，即过不恋</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">5</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/02/15/C-%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title="C#仿SnowFlake算法"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C#仿SnowFlake算法"/></a><div class="content"><a class="title" href="/2021/02/15/C-%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title="C#仿SnowFlake算法">C#仿SnowFlake算法</a><time datetime="2021-02-15T13:28:23.000Z" title="Created 2021-02-15 21:28:23">2021-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/15/Net%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title=".Net仿SnowFlake算法"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt=".Net仿SnowFlake算法"/></a><div class="content"><a class="title" href="/2021/02/15/Net%E4%BB%BFSnowFlake%E7%AE%97%E6%B3%95/" title=".Net仿SnowFlake算法">.Net仿SnowFlake算法</a><time datetime="2021-02-15T13:11:12.000Z" title="Created 2021-02-15 21:11:12">2021-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/18/MongoDB%E4%B8%A4%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/" title="MongoDB两表联合查询"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB两表联合查询"/></a><div class="content"><a class="title" href="/2020/08/18/MongoDB%E4%B8%A4%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/" title="MongoDB两表联合查询">MongoDB两表联合查询</a><time datetime="2020-08-18T13:32:42.000Z" title="Created 2020-08-18 21:32:42">2020-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/18/hugo-step-by-step/" title="hugo-step-by-step"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hugo-step-by-step"/></a><div class="content"><a class="title" href="/2020/08/18/hugo-step-by-step/" title="hugo-step-by-step">hugo-step-by-step</a><time datetime="2020-08-18T13:07:13.000Z" title="Created 2020-08-18 21:07:13">2020-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/18/hello-world/" title="Hello World"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2020/08/18/hello-world/" title="Hello World">Hello World</a><time datetime="2020-08-18T11:35:30.361Z" title="Created 2020-08-18 19:35:30">2020-08-18</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.1em; color: #999">C#</a> <a href="/tags/MongoDB/" style="font-size: 1.1em; color: #999">MongoDB</a> <a href="/tags/hugo/" style="font-size: 1.1em; color: #999">hugo</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">February 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">August 2020</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">5</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-02-15T13:38:50.163Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Godwit</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>